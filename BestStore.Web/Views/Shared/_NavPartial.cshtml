<nav class="navbar navbar-expand-sm navbar-toggleable-sm navbar-light bg-white border-bottom box-shadow">
	<div class="container">
		<a class="navbar-brand fw-bold text-primary" asp-area="" asp-controller="Home" asp-action="Index">
			<img src="~/uploads/images/icon.png" alt="" width="30" class="me-2" />
			Best Store
		</a>
		<button class="navbar-toggler border-0" type="button" data-bs-toggle="collapse" data-bs-target=".navbar-collapse" aria-controls="navbarSupportedContent"
				aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="navbar-collapse collapse d-sm-inline-flex justify-content-between">
			<ul class="navbar-nav flex-grow-1">
				<li class="nav-item">
					<a class="nav-link text-dark px-3 py-2 rounded-1" asp-area="" asp-controller="Home" asp-action="Index">
						<i class="bi bi-house-door me-1"></i> Home
					</a>
				</li>
				<li class="nav-item">
					<a class="nav-link text-dark px-3 py-2 rounded-1" asp-area="" asp-controller="Product" asp-action="Store">
						<i class="bi bi-shop me-1"></i> Store
					</a>
				</li>

				@if (User.Identity.IsAuthenticated)
				{
					@if (User.IsInRole("Admin") || User.IsInRole("SuperAdmin"))
					{
						<!-- Admin-only links -->
						@if (User.IsInRole("SuperAdmin"))
						{

							<li class="nav-item">
								<a class="nav-link text-dark px-3 py-2 rounded-1" asp-area="" asp-controller="Category" asp-action="Index">
									<i class="bi bi-box-seam me-1"></i> Categories
								</a>
							</li>
						}
						<li class="nav-item">
							<a class="nav-link text-dark px-3 py-2 rounded-1" asp-area="" asp-controller="Product" asp-action="Index">
								<i class="bi bi-box-seam me-1"></i> Products
							</a>
						</li>


						<li class="nav-item">
							<a class="nav-link text-dark px-3 py-2 rounded-1" asp-area="" asp-controller="Order" asp-action="Index">
								<i class="bi bi-receipt me-1"></i> Orders
							</a>
						</li>
					} else if (User.IsInRole("Customer"))
					{
						<!-- Customer-only links -->
						<li class="nav-item position-relative">
							<a class="nav-link text-dark px-3 py-2 rounded-1"
							   asp-area=""
							   asp-controller="Cart"
							   asp-action="Index">

								<span class="position-relative py-2">

									<i class="bi bi-cart"></i>


									<!-- Badge -->
									<span id="CartSize"
										  class="position-absolute top-0 start-50 translate-middle badge rounded-pill bg-danger">
										@(CartHelper.GetCartSize(Context.Request, Context.Response))
									</span>
								</span>
								Cart

							</a>

						</li>

						<li class="nav-item">
							<a class="nav-link text-dark px-3 py-2 rounded-1" asp-area="" asp-controller="Order" asp-action="IndexClient">
								<i class="bi bi-bag-check me-1"></i> My Orders
							</a>
						</li>
					}
					


				}
				else
				{
					<li class="nav-item position-relative">
						<a class="nav-link text-dark px-3 py-2 rounded-1"
						   asp-area=""
						   asp-controller="Cart"
						   asp-action="Index">

							<span class="position-relative py-2">

								<i class="bi bi-cart"></i>


								<!-- Badge -->
								<span id="CartSize"
									  class="position-absolute top-0 start-50 translate-middle badge rounded-pill bg-danger">
									@(CartHelper.GetCartSize(Context.Request, Context.Response))
								</span>
							</span>
							Cart

						</a>

					</li>
				}
			</ul>

			<ul class="navbar-nav align-items-center">
				@if (User.Identity.IsAuthenticated)
				{
					<!-- Authenticated users - both Admin and Customer -->
					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle d-flex align-items-center text-dark px-3 py-2 rounded-1"
						   href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
							<i class="bi bi-person-circle me-2 fs-5"></i>
							<span class="fw-medium">@User.Identity.Name</span>
						</a>
						<ul class="dropdown-menu dropdown-menu-end border-0 shadow-sm rounded-2 p-2">
							<li>
								<a class="dropdown-item px-3 py-2 rounded-1" asp-controller="Account" asp-action="Profile">
									<i class="bi bi-person me-2"></i> Profile Page
								</a>
							</li>

							@if (User.IsInRole("Admin") || User.IsInRole("SuperAdmin"))
							{
								<li>
									<a class="dropdown-item px-3 py-2 rounded-1" asp-controller="User" asp-action="Index">
										<i class="bi bi-people me-1"></i> Manage Users
									</a>
								</li>
							}
							@if (User.IsInRole("Customer"))
							{
								<li>
									<a class="dropdown-item px-3 py-2 rounded-1" asp-controller="Order" asp-action="IndexClient">
										<i class="bi bi-bag-check me-2"></i> My Orders
									</a>
								</li>
							}
							<li><hr class="dropdown-divider my-2"></li>
							<li>
								<form id="logout" method="post" asp-action="Logout" asp-controller="Account" class="d-none"></form>
								<button class="dropdown-item px-3 py-2 rounded-1 text-danger fw-medium"
										onclick="document.getElementById('logout').submit()">
									<i class="bi bi-box-arrow-right me-2"></i> Logout
								</button>
							</li>
						</ul>
					</li>
				}
				else
				{
					<!-- Unauthenticated users -->
					<li class="nav-item me-2">
						<a class="btn btn-outline-primary px-4 py-2 rounded-2 fw-medium border-2" style="min-height:unset"
						   asp-controller="Account" asp-action="Register">
							Register
						</a>
					</li>
					<li class="nav-item">
						<a class="btn btn-primary px-4 py-2 rounded-2 fw-medium text-white" style="min-height:unset"
						   asp-controller="Account" asp-action="Login">
							Login
						</a>
					</li>
				}
			</ul>
		</div>
	</div>
</nav>

<style>
	/* Base styles */
	.navbar {
		padding-top: 0.75rem;
		padding-bottom: 0.75rem;
	}

	/* Nav links styling */
	.nav-link {
		margin: 0 0.1rem;
		transition: all 0.2s ease;
	}

		.nav-link:hover {
			background-color: #f0f7ff;
			color: #0d6efd !important;
			transform: translateY(-1px);
		}

		.nav-link.active {
			background-color: #e3f2fd;
			color: #0d6efd !important;
			font-weight: 500;
		}

	/* Button styles */
	.btn-primary {
		background-color: #0d6efd;
		border-color: #0d6efd;
		transition: all 0.2s ease;
	}

		.btn-primary:hover {
			background-color: #0b5ed7;
			border-color: #0a58ca;
			transform: translateY(-1px);
			box-shadow: 0 2px 8px rgba(13, 110, 253, 0.25);
		}

	.btn-outline-primary:hover {
		background-color: #0d6efd;
		color: white;
		transform: translateY(-1px);
		box-shadow: 0 2px 8px rgba(13, 110, 253, 0.25);
	}

	/* Dropdown styling */
	/* ✅ Navbar فقط */
	.navbar .dropdown-toggle::after {
		vertical-align: middle;
		margin-left: 0.5rem;
	}

	.navbar .dropdown-item {
		transition: all 0.15s ease;
		margin: 0.1rem 0;
	}

		.navbar .dropdown-item:hover {
			background-color: #e9ecef;
			transform: translateX(2px);
		}

	.navbar .dropdown-menu {
		min-width: 200px;
		border: 1px solid #dee2e6;
		animation: fadeIn 0.2s ease;
	}

	@@keyframes fadeIn {
		from {
			opacity: 0;
			transform: translateY(-5px);
		}

		to {
			opacity: 1;
			transform: translateY(0);
		}
	}
	/* Brand styling */
	.navbar-brand {
		font-size: 1.4rem;
		transition: opacity 0.2s ease;
	}

		.navbar-brand:hover {
			opacity: 0.85;
		}

	/* Cart icon */
	.bi-cart {
		position: relative;
	}

	/* Smooth animation for dropdown */
	.dropdown-menu {
		animation: fadeIn 0.2s ease;
	}

	@@keyframes fadeIn {
		from {
			opacity: 0;
			transform: translateY(-5px);
		}

		to {
			opacity: 1;
			transform: translateY(0);
		}
	}
</style>

		